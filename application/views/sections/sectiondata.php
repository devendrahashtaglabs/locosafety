<style>
.SmText{
	font-size:20px;
}
.SmText1{
	font-size:15px;
	font-weight: bold;
}

.TopBox1 {
	background: #920707;
}
.TopBox1  i, .TopBox1  a, .TopBox1  h3{
	color:#FFF;
}
.TopBox1  h3{
	margin-top:10px;
}

.TopBox2 {
	background: #b9b906;
}
.TopBox2  i, .TopBox2  a, .TopBox2  h3{
	color:#FFF;
}
.TopBox2  h3{
	margin-top:10px;
}

.TopBox3 {
	background: #4a864c;
}
.TopBox3  i, .TopBox3  a, .TopBox3  h3{
	color:#FFF;
}
.TopBox3  h3{
	margin-top:10px;
}

.TopBox4 {
	background: #2f2f73;
}
.TopBox4  i, .TopBox4  a, .TopBox4  h3{
	color:#FFF;
}
.TopBox4  h3{
	margin-top:10px;
}

.TopBox5 {
	background: #b36c03;
}
.TopBox5  i, .TopBox5  a, .TopBox5  h3{
	color:#FFF;
}
.TopBox5  h3{
	margin-top:10px;
}
.progress-bar-warning {
    background-color: #f0ad4e;
}
</style>
<style>
		.BoxDiv {
			border: solid 2px #999;
			text-align: center;
		}
		.BoxDiv > label {
			font-size: 16px;
		}
		.BoxDiv > h2 {
			padding-top:10px;
			font-size: 22px;
		}
		.tooltipsstext .progress {
			height: 10px;
		}
		.sectionBox .col-xs-6{
			font-size:10px;
			padding:0px;
		}
		.SectionName{
			font-size:7px;
		}
	</style>
<style>
    
.dashboard-bar .progress-bar {
    font-size: 13px;
}
.progress-bar-striped, .progress-striped .progress-bar {
    background-image: -webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent) !important;
    background-image: -o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent) !important;
    background-image: linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent) !important;
    background-size: 40px 40px;
}
.ui-widget-content {
	border: 0px !important;
	color: #fff !important;
}
.progress-bar.progress-bar-success.progress-bar-striped.active.ui-progressbar.ui-widget.ui-widget-content.ui-corner-all {
    text-align: center;
}
.progress-bar.progress-bar-danger.progress-bar-striped.active.ui-progressbar.ui-widget.ui-widget-content.ui-corner-all {
    text-align: center;
}
</style>

<style type="text/css">	
	.SectionName{
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
	}
	.flt{
		float:left;
	}
	.black_color{
		background:rgba(0,0,0,0.9);

	}
	.shopBox {
		border: red 1px solid;	
		padding:0px; 	
	}
	.sectionBox {
		height: 38px;
		color:#fff;
		/*opacity: 0.6;*/
		text-align: center;
	}
	.workshop-layout {	
	//background: #fff url(<?php //echo $MapImgUrl; ?>) no-repeat;
	background-size: 100% 100%;
	width: 100%;
	/* height: auto; */
	padding: 0 15px;
	display: block;
	float: left;
}
.col-loco-1{	
	height: 38px;
}
span.managecolr {
    float: left;
    width: 15px;
    border: 1px solid #ccc;
    height: 15px;
    margin-right: 5px;
	margin-top: 2px;
}
span.tooltipssmanagecolr {
    float: left;
    width: 15px;
    border: 1px solid #ccc;
    height: 15px;
    margin-right: 5px;
}
.Crane-color-danger{
	background-color: #f00;
}	
.Crane-color {
    background-color: #b9b906;

}
.sling-color {
    background-color: #a52a2a;

}
.tool-color {
    background-color: #808080;

}
.CAS-color {
    background-color: #2a3f54;

}

.dashboard-bar .progress-bar {
    font-size: 13px;
}
.progress-bar-striped, .progress-striped .progress-bar {
    background-image: -webkit-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent) !important;
    background-image: -o-linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent) !important;
    background-image: linear-gradient(45deg,rgba(255,255,255,.15) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.15) 50%,rgba(255,255,255,.15) 75%,transparent 75%,transparent) !important;
    background-size: 40px 40px;
}
.ui-widget-content {
	border: 0px !important;
	color: #fff !important;
}
.progress-bar.progress-bar-success.progress-bar-striped.active.ui-progressbar.ui-widget.ui-widget-content.ui-corner-all {
    text-align: center;
}
.progress-bar-danger{
    background-color: #d9534f;
}
.progress-bar-success{
    background-color: #5cb85c;
}
.ui-corner-all{
    border-radius : 0px;
}
.progress .progress-bar{
    position: unset;
}

.Crane-color.blinkboxX{
	
	-webkit-animation: Crane 1s infinite; /* Safari 4+ */
  -moz-animation:    Crane 1s infinite; /* Fx 5+ */
  -o-animation:      Crane 1s infinite; /* Opera 12+ */
  animation:         Crane 1s infinite; /* IE 10+, Fx 29+ */-webkit-animation: NAME-YOUR-ANIMATION 1s infinite; /* Safari 4+ */
  -moz-animation:    Crane 1s infinite; /* Fx 5+ */
  -o-animation:     Crane 1s infinite; /* Opera 12+ */
  animation:         Crane 1s infinite; /* IE 10+, Fx 29+ */
}


@-webkit-keyframes Crane {
0%, 49% {
    background-color: #b9b906;
  //  border: 3px solid #e50000;
}
50%, 100% {
    background-color: #e50000;
  //  border: 3px solid rgb(117,209,63);
}
}

.Crane-color.blinkboxi{
	-webkit-animation: Crane 1s infinite; /* Safari 4+ */
  -moz-animation:    Crane 1s infinite; /* Fx 5+ */
  -o-animation:      Crane 1s infinite; /* Opera 12+ */
  animation:         Crane 1s infinite; /* IE 10+, Fx 29+ */-webkit-animation: NAME-YOUR-ANIMATION 1s infinite; /* Safari 4+ */
  -moz-animation:    Crane 1s infinite; /* Fx 5+ */
  -o-animation:     Crane 1s infinite; /* Opera 12+ */
  animation:         Crane 1s infinite; /* IE 10+, Fx 29+ */
}


.sling-color.blinkboxX{
	
	-webkit-animation: sling 1s infinite; /* Safari 4+ */
  -moz-animation:    sling 1s infinite; /* Fx 5+ */
  -o-animation:      sling 1s infinite; /* Opera 12+ */
  animation:         sling 1s infinite; /* IE 10+, Fx 29+ */-webkit-animation: NAME-YOUR-ANIMATION 1s infinite; /* Safari 4+ */
  -moz-animation:    sling 1s infinite; /* Fx 5+ */
  -o-animation:     sling 1s infinite; /* Opera 12+ */
  animation:         sling 1s infinite; /* IE 10+, Fx 29+ */
}


@-webkit-keyframes sling {
0%, 49% {
    background-color: #a52a2a;
  //  border: 3px solid #a52a2a;
}
50%, 100% {
    background-color: #e50000;
  //  border: 3px solid rgb(117,209,63);
}
}

.sling-color.blinkboxi{
	-webkit-animation: sling 1s infinite; /* Safari 4+ */
  -moz-animation:    sling 1s infinite; /* Fx 5+ */
  -o-animation:      sling 1s infinite; /* Opera 12+ */
  animation:         sling 1s infinite; /* IE 10+, Fx 29+ */-webkit-animation: NAME-YOUR-ANIMATION 1s infinite; /* Safari 4+ */
  -moz-animation:    sling 1s infinite; /* Fx 5+ */
  -o-animation:     sling 1s infinite; /* Opera 12+ */
  animation:         sling 1s infinite; /* IE 10+, Fx 29+ */
}





.tool-color.blinkboxX{
	
	-webkit-animation: tool 1s infinite; /* Safari 4+ */
  -moz-animation:    tool 1s infinite; /* Fx 5+ */
  -o-animation:      tool 1s infinite; /* Opera 12+ */
  animation:         tool 1s infinite; /* IE 10+, Fx 29+ */-webkit-animation: NAME-YOUR-ANIMATION 1s infinite; /* Safari 4+ */
  -moz-animation:    tool 1s infinite; /* Fx 5+ */
  -o-animation:     tool 1s infinite; /* Opera 12+ */
  animation:         tool 1s infinite; /* IE 10+, Fx 29+ */
}


@-webkit-keyframes tool {
0%, 49% {
    background-color: #808080;
  //  border: 3px solid #808080;
}
50%, 100% {
    background-color: #e50000;
  //  border: 3px solid rgb(117,209,63);
}
}

.tool-color.blinkboxi{
	-webkit-animation: tool 1s infinite; /* Safari 4+ */
  -moz-animation:    tool 1s infinite; /* Fx 5+ */
  -o-animation:      tool 1s infinite; /* Opera 12+ */
  animation:         tool 1s infinite; /* IE 10+, Fx 29+ */-webkit-animation: NAME-YOUR-ANIMATION 1s infinite; /* Safari 4+ */
  -moz-animation:    tool 1s infinite; /* Fx 5+ */
  -o-animation:     tool 1s infinite; /* Opera 12+ */
  animation:         tool 1s infinite; /* IE 10+, Fx 29+ */
}


.CAS-color.blinkboxX{
	
	-webkit-animation: CAS 1s infinite; /* Safari 4+ */
  -moz-animation:    CAS 1s infinite; /* Fx 5+ */
  -o-animation:      CAS 1s infinite; /* Opera 12+ */
  animation:         CAS 1s infinite; /* IE 10+, Fx 29+ */-webkit-animation: NAME-YOUR-ANIMATION 1s infinite; /* Safari 4+ */
  -moz-animation:    CAS 1s infinite; /* Fx 5+ */
  -o-animation:     CAS 1s infinite; /* Opera 12+ */
  animation:         CAS 1s infinite; /* IE 10+, Fx 29+ */
}


@-webkit-keyframes CAS {
0%, 49% {
    background-color: #e50000;
  //  border: 3px solid #e50000;
}
50%, 100% {
    background-color: #e50000;
  //  border: 3px solid rgb(117,209,63);
}
}

.CAS-color.blinkboxi{
	-webkit-animation: CAS 1s infinite; /* Safari 4+ */
  -moz-animation:    CAS 1s infinite; /* Fx 5+ */
  -o-animation:      CAS 1s infinite; /* Opera 12+ */
  animation:         CAS 1s infinite; /* IE 10+, Fx 29+ */-webkit-animation: NAME-YOUR-ANIMATION 1s infinite; /* Safari 4+ */
  -moz-animation:    CAS 1s infinite; /* Fx 5+ */
  -o-animation:     CAS 1s infinite; /* Opera 12+ */
  animation:         CAS 1s infinite; /* IE 10+, Fx 29+ */
}

/* ============== ToolsTip ============== */
.tooltipss {
  position: relative;
  display: inline-block;

}

.tooltipss .tooltipsstext {
  visibility: hidden;
  width: 375px;
  background-color: black;
  opacity:0.9;
  color: #fff;
  padding:5px 15px;
  text-align: left;
  border-radius: 6px;

  /* Position the tooltipss */
  position: absolute;
  z-index: 9999;
}

.tooltipss:hover .tooltipsstext {
  visibility: visible;
}
.tooltipss .tooltipsstext {
  top: -5px;
  right: 105%;
}
/* ============== ToolsTip ============== */
.MixBox > .fa {
	display: contents!important;
}
.catcounthardware{
	width: 100%;
	height: 100%;
	font-size: 18px;
    padding-top: 6px;
}
.bg-red{
	background: #e50000;
}
</style>
<!-- page content -->
<div class="right_col" role="main">
  <div class="">
    <div class="clearfix"></div>
    <div class="row">
      <div class="col-md-12 col-sm-12 col-xs-12">
      	<div class="x_panel">
		<?php 
                    $loggedInUserDetail = $this->session->userdata('loggedInUserDetail'); 
                ?>
          <div class="x_title">
                <h2><?php echo "Section Details"; ?></h2>
                <div class="clearfix"></div>
          </div>
          <div class="x_content">
              
              <?php 
               $shopData = $this->Shops_model->getShopBy($sectionDataById->shop_id);
               if($shopData){
                   $shopName  =  $shopData->shop_name;   
//                   $UserData = $this->Shops_model->GetShopUserName($shopData->shop_id);
//                   print_r($UserData);
//                   exit;
               }else{
                    $shopName  = '';                   
               }
              ?>
              
              <div class="col-md-5">
                  <div class="col-md-4" >
                      <label>
                          Shop Name :
                      </label>
                  </div>
                  <div class="col-md-6" >
                      
                          <?php echo $shopName; ?>
                      
                  </div>
              </div>
            
              <div class="col-md-5">
                  <div class="col-md-4" >
                      <label>
                          Section Name  :
                      </label>
                  </div>
                  <div class="col-md-6" >
                      
                          <?php echo $sectionDataById->section_name; ?>
                      
                  </div>
              </div>
              <div class="col-md-2"></div>
             <div class="col-md-12 BoxDiv" style="padding-top:20px; margin-top:20px;">
                <div class="col-md-4 ">
                    <div class="col-md-5">
                        <label>Active  : </label>
                    </div>  
                    <div class="col-md-7">
                        <div class="progress">
                            <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" aria-valuenow="40"
                            aria-valuemin="0" aria-valuemax="100" style="width:100%">
                            </div>
                        </div>    
                    </div> 
                </div> 
                <div class="col-md-4">
                    <div class="col-md-5">
                        <label>Active But Due to Schedule  : </label>
                    </div>  
                    <div class="col-md-7">
                        <div class="progress">
                            <div class="progress-bar progress-bar-warning progress-bar-striped" role="progressbar" aria-valuenow="40"
                            aria-valuemin="0" aria-valuemax="100" style="width:100%">
                            </div>
                        </div>    
                    </div> 
                </div>
                <div class="col-md-4">
                    <div class="col-md-5">
                        <label>Inactive Or Breakdown : </label>
                    </div>  
                    <div class="col-md-7">
                        <div class="progress">
                            <div class="progress-bar progress-bar-danger progress-bar-striped" role="progressbar" aria-valuenow="40"
                            aria-valuemin="0" aria-valuemax="100" style="width:100%">
                            </div>
                        </div>    
                    </div> 
                </div>
            </div>
            <div class="row">
                        <?php

                            $dataAllCat = $this->Dashboard_model->GetCatByZone();
                           
                            $AllCat =array();
                            $i=0;
                            foreach($dataAllCat as $cat){
//                                    if($i == 5){
//                                            break;
//                                    }
                                    array_push($AllCat,$cat->id);
                                    $i++;
                            }

                            //$AllCat = array(1,2,3);

                            foreach($AllCat as $CatID){

                                $cat_ids               = $CatID;
                                $categoryData	       = $this->Categories_model->getCatById($cat_ids);
                               // $allTicketHardwares    = count($this->Dashboard_model->getalltickethardwarebycategorySection($cat_ids,$sectionid));
                                
                               // $allHardwares		= count($this->Dashboard_model->getallhardwarebycategorysectiontype($cat_ids,$sectionid));
                                
                               // $allHardwaresNotTicket = count($this->Dashboard_model->getallhardwarebycategorysectiontypeNotTicket($cat_ids,$sectionid));
                               //print_r($this->db->last_query());
                               // exit;
                                
                                /*SELECT hardware_schedule_config_tbl.* FROM hardware_schedule_config_tbl WHERE hardware_schedule_config_tbl.next_schedule_date < '2020-01-23' AND hardware_schedule_config_tbl.map_id NOT IN (SELECT DISTINCT hardware_map_section_id FROM tickets_tbl WHERE ticket_status = 20 GROUP BY hardware_map_section_id )
GROUP BY hardware_schedule_config_tbl.map_id */
                                
                                $allSchedule	       = count($this->Dashboard_model->GetAllHwdDue($cat_ids,$sectionid));
                            
                                $allTicketHardwares    = count($this->Dashboard_model->GetAllTicketHWD($cat_ids,$sectionid));
                                $allHardwares          = count($this->Dashboard_model->GetAllHWD($cat_ids,$sectionid));
                                
                              //  print_r($this->db->last_query());
                              //  exit;
                                if($allHardwares > 0){
                                    
                                   $SchedulePer = round(($allSchedule / $allHardwares)* 100);
                                   $TicketPer = round(($allTicketHardwares / $allHardwares)* 100);
                                   $TotalGood = round(100 - ($TicketPer + $SchedulePer)); 
                                    
//                                        $cranePercentage	= ($allTicketHardwares * 100) / $allHardwares;
//                                        $cranePercentage	= round(number_format((float)$cranePercentage, 2, '.', ''));
//                                        $totalNoNTicket 	= 100 - $cranePercentage;
                                    $labelName 		= "% Active";
                                }else{
                                        $SchedulePer = 0;
                                        $TicketPer = 0;
                                        $TotalGood = 0;
                                        $cranePercentage	= 0;
                                        $TicketPer 	= 0;
                                        $TotalGood 		= 0;
                                        
                                }			
                                  //Unhealthy  
                                //$due_cat_count  		= count($this->Dashboard_model->getTicketByCat(20,60,$user_zone,$user_division,$CatID));
                                $duestatus 			= 60;
                                $breakdown_cat_count  	= count($this->Dashboard_model->getTicketByCatSection(20,90,$user_zone,$user_division,$CatID,$sectionid));

                                $due_cat_count  		= count($this->Dashboard_model->getallscheduleTicketBySectionId($user_zone,$user_division,$CatID,$duestatus,$sectionid));		
                                $totalNoNTicket = 25;
                                $totalNoNTicket1 = 25;
                       
                            ?>		

                                    <div class="col-md-3" style="padding: 20px;">
                                        
                                            <div class="row BoxDiv" >
                                            </br>
                                                    <label> <?php echo $categoryData->category_name; ?> <span><?php echo isset($allHardwares)?$allHardwares:''; ?></span> </label>

                                                    <div class="col-md-12">
                                                            <div class="widget_summary">	                    
                                                                <div class=" col-md-12" style="">
                                                                            <div class="progress dashboard-bar">
                                                                                    <div class="progress-bar progress-bar-success progress-bar-striped active" role="progressbar" aria-valuenow="<?php echo isset($TotalGood)?$TotalGood:''; ?>"
                                                                                    aria-valuemin="0" aria-valuemax="100" style="text-align:center;width:<?php echo isset($TotalGood)?$TotalGood:''; ?>%">
                                                                                        <?php echo isset($TotalGood)?$TotalGood:''; ?>%
                                                                                    </div>
                                                                                    <div class="progress-bar progress-bar-danger progress-bar-striped active" role="progressbar" aria-valuenow="<?php echo isset($TicketPer)?$TicketPer:''; ?>"
                                                                                    aria-valuemin="0" aria-valuemax="100" style="text-align:center;width:<?php echo isset($TicketPer)?$TicketPer:''; ?>%">
                                                                                        <?php echo isset($TicketPer)?$TicketPer:''; ?>%   
                                                                                    </div>
                                                                                    <div class="progress-bar progress-bar-warning progress-bar-striped active" role="progressbar" aria-valuenow="<?php echo isset($SchedulePer)?$SchedulePer:''; ?>"
                                                                                    aria-valuemin="0" aria-valuemax="100" style="text-align:center;width:<?php echo isset($SchedulePer)?$SchedulePer:''; ?>%">
                                                                                        <?php echo isset($SchedulePer)?$SchedulePer:''; ?>%
                                                                                    </div>
                                                                            </div>
                                                                    </div>					
                                                                    <div class="clearfix"></div>						
                                                            </div>

                                                            <div class="row" >
                                                                    <div class="col-md-6 ">
                                                                            <?php 
                                                                                    $blinkX = '' ;
                                                                                    $blinkI = '' ;
                                                                                    if($breakdown_cat_count>0){
                                                                                            $blinkX = 'blinkboxX';
                                                                                    }
                                                                                    if($due_cat_count>0){
                                                                                            $blinkI = 'blinkboxi';
                                                                                    }
                                                                            ?>
                                                                            <div class="col-md-3 Crane-color <?php echo $blinkX; ?>">
                                                                                    <i class="fa fa-times" aria-hidden="true"></i>
                                                                            </div>
                                                                            <div class="col-md-9">
                                                                                    <?php echo $breakdown_cat_count;  ?>
                                                                            </div>
                                                                    </div>
                                                                    <div class="col-md-6 ">
                                                                            <div class="col-md-3  Crane-color <?php echo $blinkI; ?>">
                                                                                    <i class="fa fa-exclamation" aria-hidden="true"></i>						
                                                                            </div>
                                                                            <div class="col-md-9">
                                                                                    <?php echo $due_cat_count;  ?>
                                                                            </div>
                                                                    </div>
                                                            </div>
                                                            </br>
                                                    </div>
                                            </div>			
                                    </div>
                    <?php }	?>	
            </div>
              
              
          </div>
        </div>
        
      </div>
    </div>
  </div>
</div>
<!-- /page content -->
<script>
	jQuery(function($) {
		var $or = $(".cat-icon"),
			$bl = $(".cat-count"),
			changeColor;
			$or.hide();
			$bl.show();
			
		changeColor = function() {
			 $or.toggle();
			 $bl.toggle();
		};
		setInterval(changeColor, 600);
	});
	jQuery(function($) {
		$('.sectionfilter .btn-primary').click(function(){
			if ($('.sectionfilter .btn-primary').hasClass('active')) {
				$('.sectionfilter .btn-primary').removeClass("active");
			}
			$(this).addClass('active');
		});		
	});
</script>